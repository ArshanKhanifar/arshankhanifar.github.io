{"version":3,"sources":["serviceWorker.js","components/latency_stats_component.js","components/latency_box_plot.js","components/latency_stage_report.js","styles_configuration.js","components/bufferbloat_callouts.js","components/latency_results_report.js","stages/stage.js","utilities/timer.js","tools/generic_latency_collector.js","tools/latency_collector_provider.js","tools/latency_candidates.js","stages/latency_measurement_stage.js","tools/download_measurement_collector.js","stages/downlink_measurement_stage.js","tools/upload_measurement_collector.js","stages/uplink_measurement_stage.js","components/bandwidth_report_component.js","components/card_title_component.js","tools/report_generator.js","pages/main_page.js","samples/upload_websockets_sample.js","samples/guess_upload_sample.js","index.js","app_configuration.js","utilities/statistics_utilities.js","components/box_plot.js"],"names":["Boolean","window","location","hostname","match","LatencyStatsComponent","props","Row","style","fontSize","fontWeight","whiteSpace","Col","sm","this","min","median","max","q1","q3","jitter","Component","LatencyBoxPlot","LatencyStageReport","Card","Body","className","md","xs","marginTop","title","data","scale","box_plot_scale","tooltip_html","stats","StylesConfiguration","BufferbloatCallouts","stage","i","measurement","status_class","toFixed","textAlign","Object","keys","stage_data","map","k","key","length","borderLeft","configuration","report_bufferbloat","LatencyResultsReport","Stage","Timer","ms","Promise","resolve","setTimeout","GenericLatencyCollector","url","interval","interval_cb","done_cb","count","cancelled","fetch","then","res","text","entries","performance","getEntriesByName","perf","slice","pop","ttfb","responseStart","requestStart","AppConfiguration","IGNORE_TTFB_BELOW","clearResourceTimings","sleep","LatencyCollectorProvider","data_cb","PING_INTERVAL","LatencyMeasurementStage","data_callback","done_callback","collector","provide","NUM_LATENCY_MEASUREMENTS","start","DownloadMeasurementCollector","measurement_callback","controller","AbortController","size","signal","r","streams","measure_download","n","cancel","num_streams","Array","fill","_","req","get_http_fetch","total_start","Date","now","counter","total_counter","reset_counter","speed","convert_to_bps","requests","make_requests","a","console","log","reader","body","getReader","pump","read","done","value","all","rate_bps","abort","DownlinkMeasurementStage","bandwidth_callback","downloader","download_for_n_seconds","DOWNLOAD_DURATION","DOWNLOAD_NUM_STREAMS","download_speed","UploadMeasurementCollector","started_saturation_cb","method","repeat","headers","response","this_repeats_n_times","threshold","last_bandwidth","bandwidth","measure_bandwidth","Math","abs","j","check","n_seconds","guess_upload_speed","guess_bandwidth_byteps","file_size","UplinkMeasurementStage","uploader","upload","UPLOAD_DURATION","UPLOAD_NUM_STREAMS","upload_speed","BandwidthReportComponent","CardTitleComponent","category","criteria","criterion","reduce","b","report","grade","marginBottom","categories","name","src","get_picture","alt","ReportGenerator","test_data","downlink","uplink","latency","latency_with_jitter","stages_data","stages","gradings","until","Infinity","latencies","downlink_bb","uplink_bb","combined_bb","measurements","criteria_names","dict","c_name","grading","UploadWebsocketsSample","Navbar","bg","Brand","href","Container","Button","onClick","bind","print_bandwidth","bw","xhr","XMLHttpRequest","addEventListener","e","position","loaded","total","totalSize","floor","start_tmp","last_done","remaining","bandwidths","onprogress","push","onreadystatechange","readyState","StatisticsUtilities","calculate_important_values","std","open","setRequestHeader","send","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message","MAX_LATENCY_PLOTTED","sorted_data","d3","BoxPlot","TRANSITION_TIME","DOT_COLOUR","chart_component","React","createRef","filter","d","is_invalid","height","width","sorted","sort","margin","top","right","bottom","left","get_chart_parameters","svg","current","append","attr","_svg","update_scale","_points_container","add_tooltip","draw_points","add_line_with_ticks","add_quartile_box_if_it_doesnt_exist","_tooltip","selection","rel_pos","tooltip","component","mouseover","mousemove","relative_dist","html","eval","mouseleave","on","x","_x_scale","selectAll","enter","set_circle_attributes","transition","duration","mid_anchor_rel","middle_anchor","_middle_anchor","x_min","x_max","make_tic","at","main_line","tick_1","tick_2","_quartile_box","add_quartile_box","_quartile_rect","_median_line","domain","range","transition_tick","tick","update_points_locations","update_line_with_ticks","update_box","datum","refresh_chart","prevProps","prevState","snapshot","ref"],"mappings":"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","file":"static/js/main.03e7240e.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App_old is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React, {Component} from 'react';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\n\nexport default class LatencyStatsComponent extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <>\n        <Row style={{fontSize: 13, fontWeight: 'bold', whiteSpace: 'nowrap'}}>\n          <Col sm={6}>\n            min: {this.props.min}ms<br/>\n            median: {this.props.median}ms<br/>\n            max: {this.props.max}ms\n          </Col>\n          <Col sm={6}>\n            25%: {this.props.q1}ms<br/>\n            75%: {this.props.q3}ms<br/>\n            jitter: {this.props.jitter}ms\n          </Col>\n        </Row>\n      </>\n    )\n  }\n}","import React, {Component} from 'react';\nimport BoxPlot from \"./box_plot\";\n\nexport default class LatencyBoxPlot extends Component {\n  render() {\n    return (\n      <BoxPlot\n        {...this.props}\n      />\n    );\n  }\n\n}\n","import React, {Component} from 'react';\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\nimport LatencyStatsComponent from \"./latency_stats_component\";\nimport './latency_stage_report.scss';\nimport LatencyBoxPlot from \"./latency_box_plot\";\n\n\nexport default class LatencyStageReport extends Component {\n  render() {\n    return (\n      <>\n        <Card.Body className={\"WBBLatencyStageReport\"}>\n          <Row>\n            <Col md={2} xs={2}>\n              <h5 style={{marginTop: 15}}>{this.props.title}</h5>\n            </Col>\n            <Col md={7} xs={10}>\n              <LatencyBoxPlot\n                data={this.props.data}\n                scale={this.props.box_plot_scale}\n                tooltip_html={\"latency: ${d.value}</br>timestamp: ${d.time}\"}\n              />\n            </Col>\n            <Col md={3} xs={12}>\n              <LatencyStatsComponent\n                data={this.props.data}\n                {...this.props.stats}\n              />\n            </Col>\n          </Row>\n        </Card.Body>\n      </>\n    );\n  }\n}\n","export const StylesConfiguration = {\n  DIVIDER_BORDERS: \"1px solid #979797\",\n};\n\n","import React, {Component} from 'react';\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport {StylesConfiguration} from \"../styles_configuration\";\n\n\nexport default class BufferbloatCallouts extends Component {\n  constructor(props) {\n    super(props);\n    this.median = 0;\n  }\n\n  report_bufferbloat(stage, i) {\n    if (!stage.stats) {\n      return ;\n    }\n    const BAD_MEASUREMENT_THRESHOLD = 50;\n    let measurement = 0, status_class=\"\";\n    if (i === 0) {\n      measurement = stage.stats.median;\n      this.median = measurement;\n    } else {\n      measurement = stage.stats.median - this.median;\n      measurement = (measurement >= 0) ? measurement : 0;\n      measurement = `+${measurement.toFixed(2)}`;\n      status_class = (measurement < BAD_MEASUREMENT_THRESHOLD) ? \"good\" : \"bad\";\n    }\n    measurement += \" ms\";\n    return (\n      <div className={`latency ${status_class}`}>\n        {\n          measurement\n        }\n      </div>\n    )\n  }\n\n\n  render() {\n    return (\n      <>\n        <Row style={{textAlign: 'center'}}>\n          {Object.keys(this.props.stage_data).map((k, i) => {\n            const stage = this.props.stage_data[k];\n            return (\n              <Col\n                key={k}\n                sm={12/this.props.stage_data.length}\n                style={ (i !== 0) ? {borderLeft: StylesConfiguration.DIVIDER_BORDERS}: {}}>\n                <div className=\"condition\">\n                  {stage.configuration.title}\n                </div>\n                {\n                  this.report_bufferbloat(stage, i)\n                }\n              </Col>\n            )\n          })}\n        </Row>\n      </>\n    )\n  }\n}","import React, {Component} from 'react';\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\nimport BufferbloatCallouts from \"./bufferbloat_callouts\";\n\n\nexport default class LatencyResultsReport extends Component {\n  render() {\n    return (\n      <>\n        <Card.Body className=\"WBBLatencySummary\">\n          <Row>\n            <Col sm={12} md={7}>\n              <h4>Latency Results</h4>\n              <p>Bufferbloat is measured by comparing the latency of an Internet connection when it is unloaded to when it is \"saturated.\"</p>\n            </Col>\n            <Col sm={12} md={5}>\n              <BufferbloatCallouts\n                stage_data={this.props.stage_data}\n              />\n            </Col>\n          </Row>\n        </Card.Body>\n      </>\n    );\n  }\n}\n","export default class Stage {\n  async run() {\n\n  }\n}\n","export default class Timer {\n  static async sleep(ms) {\n    return new Promise((resolve) => {\n      setTimeout(() => {\n        resolve();\n      }, ms);\n    })\n  }\n}\n","import Timer from \"../utilities/timer\";\nimport {AppConfiguration} from \"../app_configuration\";\n\n\nexport default class GenericLatencyCollector {\n  constructor(url, interval, interval_cb, done_cb, count) {\n    this.url = url;\n    this.interval = interval;\n    this.interval_cb = interval_cb;\n    this.done_cb = done_cb;\n    this.count = count;\n    this.cancelled = false;\n  }\n\n  async start() {\n    let i = 0;\n    while (i++ < this.count) {\n      await fetch(this.url).then(res => res.text());\n      let entries = performance.getEntriesByName(this.url);\n      let perf  = entries.slice(-1).pop();\n      let ttfb = perf.responseStart - perf.requestStart;\n      if (this.cancelled) {\n        return ;\n      }\n      if (ttfb < AppConfiguration.IGNORE_TTFB_BELOW) {\n        continue\n      }\n      this.interval_cb(ttfb);\n      performance.clearResourceTimings();\n      await Timer.sleep(this.interval)\n    }\n    if (this.done_cb) {\n      this.done_cb();\n    }\n  }\n\n  cancel() {\n    this.cancelled = true;\n  }\n}\n","import {AppConfiguration} from \"../app_configuration\";\nimport GenericLatencyCollector from \"./generic_latency_collector\";\nimport {main_candidate} from \"./latency_candidates\";\n\nexport default class LatencyCollectorProvider {\n  static provide(data_cb, done_cb, count) {\n    return new GenericLatencyCollector(\n      main_candidate,\n      AppConfiguration.PING_INTERVAL,\n      data_cb,\n      done_cb,\n      count\n    );\n  }\n}","let urls = [\n  \"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxK.woff2\",\n  \"https://fonts.gstatic.com/l/font?kit=KFOmCnqEu92Fr1Me4GZNCzcPK4I&skey=a0a0114a1dcab3ac&v=v20\",\n  \"https://speed.cloudflare.com/__down?bytes=0\"\n], main_candidate = urls[1];\n\nexport {main_candidate}\n","import Stage from \"./stage\";\nimport LatencyCollectorProvider from \"../tools/latency_collector_provider\";\nimport {AppConfiguration} from \"../app_configuration\";\n\n\nexport default class LatencyMeasurementStage extends Stage {\n  constructor(data_callback, done_callback) {\n    super();\n    this.data_callback = data_callback;\n    this.done_callback = done_callback;\n  }\n\n  async run() {\n    super.run();\n    const collector = LatencyCollectorProvider\n      .provide(this.data_callback, this.done_callback, AppConfiguration.NUM_LATENCY_MEASUREMENTS);\n    await collector.start();\n  }\n}","import Timer from \"../utilities/timer\";\n\nexport default class DownloadMeasurementCollector {\n  constructor(measurement_callback, done_callback) {\n    this.measurement_callback = measurement_callback || (() => null);\n    this.done_callback = done_callback || (() => null);\n    this.controller = new AbortController();\n  }\n\n  get_http_fetch(size, i) {\n    let signal = this.controller.signal;\n    return fetch(`https://speed${i+1}.arshankhanifar.workers.dev/hi/down?bytes=${size}`, {signal});\n  }\n\n  convert_to_bps(r) {\n    return r*1000*8;\n  }\n\n  async download(size, streams) {\n    return this.measure_download(size, streams)\n  }\n\n  async download_for_n_seconds(n, streams) {\n    const MAX_DOWNLOAD_SIZE = 500 * 1e6;\n    setTimeout(() => {this.cancel()}, n * 1000);\n    return this.measure_download(MAX_DOWNLOAD_SIZE, streams);\n  }\n\n  make_requests(num_streams, size) {\n    return Array(num_streams)\n      .fill(0)\n      .map(_ => { return {} })\n      .map((req, i) => {\n        req.fetch = () => this.get_http_fetch(size, i);\n        return req;\n      })\n  }\n\n  async measure_download(size, streams) {\n    const window_size = 1e6,\n      total_start = Date.now();\n    let start = Date.now(),\n      counter = 0,\n      total_counter = 0;\n\n    const reset_counter = () => {\n      if (counter < window_size) {\n        return;\n      }\n      let speed = this.convert_to_bps(counter / (Date.now() - start));\n      this.measurement_callback(speed);\n      counter = 0;\n      start = Date.now();\n    };\n\n    let requests = this.make_requests(streams, size)\n      .map(async (req, i) => {\n        let res = null;\n        try {\n          res = await req.fetch();\n        } catch (e) {\n          console.log(`download request:${i} unsuccessful`, e);\n          return Promise.resolve();\n        }\n        const reader = res.body.getReader();\n        return new Promise(async resolve => {\n          try {\n            await pump();\n          } catch (err) {\n            resolve();\n          }\n          function pump() {\n            return reader.read().then(({ done, value }) => {\n              if (done) {\n                resolve();\n                return;\n              }\n              counter += value.length;\n              total_counter += value.length;\n              reset_counter();\n              return pump();\n            });\n          }\n        });\n      });\n    await Promise.all(requests);\n    let rate_bps = this.convert_to_bps(total_counter/(Date.now() - total_start));\n    this.done_callback(rate_bps);\n    return rate_bps;\n  }\n\n  cancel() {\n    this.controller.abort();\n  }\n}","import Stage from \"./stage\";\nimport DownloadMeasurementCollector from \"../tools/download_measurement_collector\";\nimport LatencyCollectorProvider from \"../tools/latency_collector_provider\";\nimport {AppConfiguration} from \"../app_configuration\";\n\n\nexport default class DownlinkMeasurementStage extends Stage {\n  constructor(data_callback, bandwidth_callback, done_callback) {\n    super();\n    this.data_callback = data_callback;\n    this.bandwidth_callback = bandwidth_callback;\n    this.done_callback = done_callback;\n  }\n\n  async run() {\n    const MEASURE_LATENCY_FOREVER = 1e5;\n    super.run();\n    const collector = LatencyCollectorProvider.provide(this.data_callback, null, MEASURE_LATENCY_FOREVER);\n    collector.start();\n    const meas_callback = (measurement) => {\n        console.log(`realtime rate ${measurement/1e6}mbps`);\n    };\n    const downloader = new DownloadMeasurementCollector(meas_callback);\n    let download_speed = await downloader.download_for_n_seconds(\n      AppConfiguration.DOWNLOAD_DURATION,\n      AppConfiguration.DOWNLOAD_NUM_STREAMS\n    );\n    collector.cancel();\n    this.bandwidth_callback(download_speed);\n    this.done_callback();\n  }\n}","export default class UploadMeasurementCollector {\n  constructor(started_saturation_cb) {\n    this.started_saturation_cb = started_saturation_cb || (() => {});\n  }\n\n  get_http_fetch(size, i) {\n    let url = `https://speed${i + 1}.arshankhanifar.workers.dev/hi/up`;\n    return fetch(`${url}`, {\n        method: 'POST',\n        body: '0'.repeat(size),\n        headers: { 'content-length': size }\n    });\n  }\n\n  async measure_bandwidth(i) {\n    let start = Date.now();\n    let response = await this.get_http_fetch(i, 1);\n    await response.text();\n    return (i/(Date.now() - start));\n  }\n\n  async guess_upload_speed() {\n    let this_repeats_n_times = async (n, threshold, last_bandwidth, size) => {\n      let bandwidth = null;\n      for (let i = 0; i < n; i++) {\n        bandwidth = await this.measure_bandwidth(size);\n        console.log('bw', bandwidth * 8 / 1e3);\n        let relative_growth = Math.abs(bandwidth - last_bandwidth)/bandwidth;\n        if (relative_growth > threshold) {\n          return [false, bandwidth];\n        }\n      }\n      return [true, bandwidth];\n    };\n    let threshold = 0.2;\n    let last_bandwidth = 0;\n    for (let j = 1; j < 30; j++) {\n      let size = 1 << j;\n      let [check, bandwidth] = await this_repeats_n_times(2, threshold, last_bandwidth, size);\n      if (check) {\n        return bandwidth * 1e3; // Bytes per second\n      }\n      last_bandwidth = bandwidth;\n    }\n    return last_bandwidth;\n  }\n\n  async upload(n_seconds, streams) {\n    let guess_bandwidth_byteps = await this.guess_upload_speed();\n    this.started_saturation_cb();\n    let file_size = n_seconds * guess_bandwidth_byteps / streams;\n    let start = Date.now();\n    let requests = Array(streams)\n      .fill(0)\n      .map(_ => { return {} })\n      .map((req, i) => {\n        req.fetch = () => this.get_http_fetch(file_size, i);\n        return req;\n      });\n    await Promise.all(requests.map(req=>req.fetch().then(res=>res.text())));\n    console.log(`total time took:${(Date.now() - start)/1000}`);\n    return ((file_size * streams * 1000 * 8)/(Date.now() - start));\n  }\n}","import Stage from \"./stage\";\nimport LatencyCollectorProvider from \"../tools/latency_collector_provider\";\nimport UploadMeasurementCollector from \"../tools/upload_measurement_collector\";\nimport {AppConfiguration} from \"../app_configuration\";\n\n\nexport default class UplinkMeasurementStage extends Stage {\n  constructor(data_callback, bandwidth_callback, done_callback) {\n    super();\n    this.data_callback = data_callback;\n    this.bandwidth_callback = bandwidth_callback;\n    this.done_callback = done_callback;\n  }\n\n  async run() {\n    const MEASURE_LATENCY_FOREVER = 1e5;\n    super.run();\n    const collector = LatencyCollectorProvider.provide(this.data_callback, null, MEASURE_LATENCY_FOREVER);\n    let uploader = new UploadMeasurementCollector(() => {\n      collector.start();\n    });\n    let upload_speed = await uploader.upload(AppConfiguration.UPLOAD_DURATION, AppConfiguration.UPLOAD_NUM_STREAMS);\n    collector.cancel();\n    this.bandwidth_callback(upload_speed);\n    this.done_callback();\n  }\n}","import React, {Component} from 'react';\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport {StylesConfiguration} from \"../styles_configuration\";\n\n\nexport default class BandwidthReportComponent extends Component {\n  render() {\n    return (\n      <>\n        {\n          (this.props.download_speed || this.props.upload_speed) &&\n          (\n            <Row>\n              <Col sm={0} md={3}></Col>\n              <Col sm={12} md={3}>\n                <h4 style={{marginTop: 10}}>Speed Test Results:</h4>\n              </Col>\n              <Col sm={12} md={3} style={{textAlign: 'center'}}>\n                <Row>\n                  {\n                    this.props.download_speed &&\n                    (<Col sm={6}>\n                      <div>\n                        ↓ Download\n                      </div>\n                      <div style={{fontSize: 20}}>\n                        {(this.props.download_speed/1e6).toFixed(2)}Mbps\n                      </div>\n                    </Col>)\n                  }\n                  {\n                    this.props.upload_speed &&\n                    (<Col sm={6} style={{borderLeft: StylesConfiguration.DIVIDER_BORDERS}}>\n                      <div>\n                        ↑ Upload\n                      </div>\n                      <div style={{fontSize: 20}}>\n                        {(this.props.upload_speed/1e6).toFixed(2)}Mbps\n                      </div>\n                    </Col>)\n                  }\n                </Row>\n              </Col>\n            </Row>\n          )\n        }\n      </>\n    )\n  }\n}\n","import React, {Component} from 'react';\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport {StylesConfiguration} from \"../styles_configuration\";\n\n\nexport default class CardTitleComponent extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  get_picture(category) {\n    const criteria = Object.keys(category.criteria);\n    let met_criteria = criteria.map(criterion => category.criteria[criterion]).reduce((a, b) => a && b);\n    return (met_criteria) ? \"shield.svg\" : \"bad.svg\";\n  }\n\n  render() {\n    return (\n      <>\n        {\n          this.props.report ? (\n            <div className={\"WBBCardTitle WBBTestingDone\"}>\n              <h2>\n                Your Bufferbloat Grade: {this.props.report.grade}\n              </h2>\n              <Row style={{marginTop: 15, marginBottom: 15}}>\n                {this.props.report.categories.map(category => (\n                  <div className={\"indicator\"} key={category.name}>\n                    <img src={this.get_picture(category)} alt=\"indicator-good\"/>\n                       {' '}\n                       <strong>\n                         {category.name}\n                       </strong>\n                       {' '}\n                  </div>\n                ))}\n              </Row>\n            </div>\n          ):(\n            <div className={\"WBBCardTitle\"}>\n              <h2>{this.props.title}</h2>\n            </div>\n          )\n        }\n      </>\n    )\n  }\n}\n","export default class ReportGenerator {\n  static generate_report(test_data) {\n    const LARGER_THAN = \"LARGER_THAN\",\n      SMALLER_THAN = \"SMALLER_THAN\";\n    const categories = [\n      // sources:\n      // 1. https://broadbandnow.com/guides/how-much-internet-speed-do-i-need\n      // 2. https://www.phone.com/much-bandwidth-need-voip/\n      // 3. https://www.lifewire.com/what-is-latency-and-how-it-can-be-reduced-3426314#:~:text=Latency%20is%20measured%20in%20milliseconds,higher%2C%20latency%20becomes%20completely%20unacceptable.\n      // 4. https://www.highspeedinternet.com/resources/how-much-speed-do-i-need-for-online-gaming\n      {\n        name: \"Web Browsing\",\n        criteria: {\n          downlink: [LARGER_THAN, 1],\n          uplink: [LARGER_THAN, 1],\n          latency: null,\n          latency_with_jitter: null,\n        }\n      },\n      {\n        name: \"Audio Calls\",\n        criteria: {\n          downlink: [LARGER_THAN, 3],\n          uplink: [LARGER_THAN, 3],\n          latency: [SMALLER_THAN, 150],\n          latency_with_jitter: [SMALLER_THAN, 200],\n        }\n      },\n      {\n        name: \"4K Video Streaming\",\n        criteria: {\n          downlink: [LARGER_THAN, 40],\n          uplink: null,\n          latency: null,\n          latency_with_jitter: null,\n        }\n      },\n      {\n        name: \"Video Conferencing\",\n        criteria: {\n          downlink: [LARGER_THAN, 2.5],\n          uplink: [LARGER_THAN, 2.5],\n          latency: [SMALLER_THAN, 150],\n          latency_with_jitter: [SMALLER_THAN, 200],\n        }\n      },\n      {\n        name: \"Online Gaming\",\n        criteria: {\n          downlink: [LARGER_THAN, 3],\n          uplink: [LARGER_THAN, 0.5],\n          latency: [SMALLER_THAN, 100],\n          latency_with_jitter: [SMALLER_THAN, 150],\n        }\n      }\n    ];\n\n    let [downlink, uplink] = [test_data.download_speed/1e6, test_data.upload_speed/1e6],\n      stages_data = Object.keys(test_data.stages).map(k => test_data.stages[k]),\n      latency = Math.max(...stages_data.map(stage_data => stage_data.stats.median)),\n      latency_with_jitter = Math.max(\n      ...stages_data.map(\n        stage_data => stage_data.stats.median + stage_data.stats.jitter\n      )\n    );\n\n    const gradings =  [\n      {\n        until: 5,\n        grade: \"A+\"\n      },\n      {\n        until: 30,\n        grade: \"A\"\n      },\n      {\n        until: 60,\n        grade: \"B\"\n      },\n      {\n        until: 200,\n        grade: \"C\"\n      },\n      {\n        until: 400,\n        grade: \"D\"\n      },\n      {\n        until: Infinity ,\n        grade: \"F\"\n      }\n    ];\n\n    const latencies = test_data.stages.map(stage_data => stage_data.stats.median);\n    let  downlink_bb = (latencies[1] - latencies[0]),\n      uplink_bb = latencies[2] - latencies[0];\n    downlink_bb = (downlink_bb > 0) ? downlink_bb : 0;\n    uplink_bb = (downlink_bb > 0) ? uplink_bb : 0;\n    const combined_bb = (downlink_bb + uplink_bb)/2;\n    const measurements = {\n      downlink: downlink,\n      uplink: uplink,\n      latency: latency,\n      latency_with_jitter: latency_with_jitter,\n    };\n\n    function grade(combined_bb) {\n      for (let i in gradings) {\n        let grading = gradings[i];\n        if (combined_bb < grading.until) {\n          return grading.grade;\n        }\n      }\n      return gradings.slice(-1).pop().grade;\n    }\n\n    return {\n      categories: categories.map(category => {\n        const criteria = category.criteria,\n          criteria_names = Object.keys(criteria);\n        const report = {\n          name: category.name,\n          criteria: criteria_names.reduce((dict, c_name) => {\n            if (criteria[c_name] === null) {\n              dict[c_name] = true;\n              return dict;\n            }\n            if (criteria[c_name][0] === LARGER_THAN) {\n              dict[c_name] = measurements[c_name] > criteria[c_name][1];\n              return dict;\n            }\n            dict[c_name] = measurements[c_name] < criteria[c_name][1];\n            return dict;\n          }, {})\n        };\n        return report;\n\n      }),\n      grade: grade(combined_bb)\n    }\n  }\n}","import * as d3 from 'd3';\nimport React, {Component} from \"react\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\nimport Button from \"react-bootstrap/Button\";\nimport Container from \"react-bootstrap/Container\";\nimport '../components/component_styles.scss';\nimport LatencyStageReport from \"../components/latency_stage_report\";\nimport LatencyResultsReport from \"../components/latency_results_report\";\nimport {AppConfiguration} from \"../app_configuration\";\nimport LatencyMeasurementStage from \"../stages/latency_measurement_stage\";\nimport DownlinkMeasurementStage from \"../stages/downlink_measurement_stage\";\nimport UplinkMeasurementStage from \"../stages/uplink_measurement_stage\";\nimport StatisticsUtilities from \"../utilities/statistics_utilities\";\nimport {DEBUG_STATE} from \"../test/debug_state\";\nimport BandwidthReportComponent from \"../components/bandwidth_report_component\";\nimport CardTitleComponent from \"../components/card_title_component\";\nimport ReportGenerator from \"../tools/report_generator\";\n\n\nexport default class MainPage extends Component {\n  BOX_PLOT_SCALE_DEFAULT = [4, 10];\n  constructor(props) {\n    super(props);\n    this.stages_configuration = [\n      {\n        name: \"unloaded\",\n        title: \"Unloaded\",\n        page_title: \"Measuring Unloaded Latency\"\n      },\n      {\n        name: \"down\",\n        title: \"↓ Saturated\",\n        page_title: \"Measuring Latency With Downlink Saturated\"\n      },\n      {\n        name: \"up\",\n        title: \"↑ Saturated\",\n        page_title: \"Measuring Latency With Uplink Saturated\"\n      }\n    ];\n    this.stage_context = null;\n    this.state = {\n      test_running: false,\n      test_title: 'Bufferbloat Test',\n      current_stage_idx: -1,\n      stages: {},\n      box_plot_scale: this.BOX_PLOT_SCALE_DEFAULT,\n      download_speed: null,\n      upload_speed: null,\n    };\n    this.stages = [\n      new LatencyMeasurementStage(\n        this.add_latency_to_current_stage.bind(this),\n        this.advance_stage.bind(this)\n      ),\n      new DownlinkMeasurementStage(\n        this.add_latency_to_current_stage.bind(this),\n        this.downlink_measurement.bind(this),\n        this.advance_stage.bind(this)\n      ),\n      new UplinkMeasurementStage(\n        this.add_latency_to_current_stage.bind(this),\n        this.uplink_measurement.bind(this),\n        this.advance_stage.bind(this)\n      )\n    ];\n  }\n\n\n  downlink_measurement(bandwidth) {\n    this.setState({\n      download_speed: bandwidth\n    });\n  }\n\n  uplink_measurement(bandwidth) {\n    this.setState({\n      upload_speed: bandwidth\n    });\n  }\n\n  componentDidMount() {\n    this.debug().then(()=>{});\n\n  }\n\n  async debug() {\n    //await this.start_test();\n    //await this.setState({\n    //  ...DEBUG_STATE[4],\n    //  current_stage_idx: 4\n    //});\n    //await this.advance_stage();\n  }\n\n  async advance_stage() {\n    let curr_idx = this.state.current_stage_idx + 1;\n    if (curr_idx >= this.stages.length) {\n      console.log(\"done running all the tests\");\n      console.log(\"state\", JSON.stringify(this.state));;\n      let stages_flattened = this.state.stages;\n      stages_flattened = Object.keys(stages_flattened).map(k => stages_flattened[k]);\n      await this.setState({\n        report: ReportGenerator.generate_report({\n          stages: stages_flattened,\n          download_speed: this.state.download_speed,\n          upload_speed: this.state.upload_speed,\n        })\n      });\n      return;\n    }\n    await this.setState({\n      current_stage_idx: curr_idx,\n      stages: {\n        ...this.state.stages,\n        [curr_idx]: {\n          configuration: this.stages_configuration[curr_idx],\n          data: []\n        }\n      },\n      test_title: `${curr_idx + 1}/${this.stages_configuration.length} ${this.stages_configuration[curr_idx].page_title}`\n    });\n    this.stages[curr_idx].run(this.stage_context);\n  }\n\n  async start_test() {\n    await this.setState({\n      test_running: true,\n    });\n    this.advance_stage();\n  }\n\n  adjust_scale(latency) {\n    if (latency > AppConfiguration.MAX_LATENCY_PLOTTED) {\n      return;\n    }\n    if (latency > this.state.box_plot_scale[1]) {\n      this.setState({\n        box_plot_scale: [0, latency]\n      })\n    }\n  }\n\n  add_latency_to_current_stage(latency) {\n    this.adjust_scale(latency);\n    let curr_idx = this.state.current_stage_idx,\n      current_stage = this.state.stages[curr_idx],\n      current_data = current_stage.data || [],\n      new_data = [...current_data, {value: latency}];\n    this.setState({\n      stages: {\n        ...this.state.stages,\n        [curr_idx]: {\n          ...current_stage,\n          data: new_data,\n          stats: {\n            ...this.calculate_stats(new_data)\n          }\n        }\n      }\n    })\n  }\n\n  calculate_stats(data) {\n    let sorted = [...data.map(d => d.value)].sort(d3.ascending);\n    let [q1, q3, median, min, max, std] = StatisticsUtilities\n      .calculate_important_values(sorted)\n      .map(d => parseFloat(d.toFixed(1)));\n    return {\n      min: min,\n      max: max,\n      q1: q1,\n      q3: q3,\n      median: median,\n      jitter: std\n    };\n  }\n\n  render() {\n    return (\n      <>\n        <p>version: 1.07</p>\n        <Col sm={12}>\n          <Container>\n            <Row style={{ marginTop: 40 }}>\n              <Col sm={12}>\n                <Card className=\"WBBCard WBBMainTestCard\">\n                  <Card.Header>\n                    <CardTitleComponent\n                      title={this.state.test_title}\n                      report={this.state.report}\n                    />\n                  </Card.Header>\n                  { !this.state.test_running ? (\n                    <Card.Body>\n                      <Card.Text>\n                        Click below to start running the test.\n                      </Card.Text>\n                      <Button variant=\"primary\" onClick={this.start_test.bind(this)}>Start Test</Button>\n                    </Card.Body>\n                  ) : (\n                    <Card.Body>\n                      <LatencyResultsReport\n                        stage_data={this.state.stages}\n                      />\n                      {\n                        Object.keys(this.state.stages).map((i) => {\n                          let stage = this.state.stages[i];\n                          return (\n                            <div key={stage.configuration.name}>\n                              {\n                                (parseInt(i) !== 0) ?\n                                  (<Col sm={12}>\n                                    <div className={\"spacer\"}/>\n                                  </Col>)\n                                  : (<></>)\n                              }\n                              <LatencyStageReport\n                                box_plot_scale={this.state.box_plot_scale}\n                                title={stage.configuration.title}\n                                key={stage.configuration.name}\n                                data={stage.data}\n                                stats={stage.stats}\n                              />\n                            </div>\n                          )\n                        })\n                      }\n                      <BandwidthReportComponent\n                        download_speed={this.state.download_speed}\n                        upload_speed={this.state.upload_speed}\n                      />\n                    </Card.Body>\n                  )}\n                </Card>\n              </Col>\n            </Row>\n          </Container>\n        </Col>\n      </>\n    );\n  }\n}\n","import React, {Component} from 'react';\nimport Navbar from \"react-bootstrap/Navbar\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Button from \"react-bootstrap/Button\";\nimport UploadMeasurementCollector from \"../tools/upload_measurement_collector\";\nimport StatisticsUtilities from \"../utilities/statistics_utilities\";\n\n\nexport default class UploadWebsocketsSample extends Component {\n  render() {\n    return (\n      <>\n        <Navbar bg=\"light\">\n          <Navbar.Brand href=\"#\">KNP</Navbar.Brand>\n        </Navbar>\n        <Container>\n          <Row>\n            Hello, World! Version 0.1\n          </Row>\n          <Button onClick={this.upload.bind(this)}>Upload</Button>\n        </Container>\n      </>\n    );\n  }\n\n  async upload() {\n    let size = 100 * 1e6;\n    //let size = 10 * 1e6;\n    //let size = 1e5;\n    let url = `https://speed1.arshankhanifar.workers.dev/hi/up`;\n    //let url = `http://127.0.0.1:8787/hi/up?`;\n    let body = \"0\".repeat(size);\n    //let headers = { 'content-length': size };\n    //let res = await fetch(url, {\n    //  method: 'POST',\n    //  body: body,\n    //  headers: headers\n    //});\n    //await res.text();\n    //return ;\n\n    var xhr = new XMLHttpRequest();\n    xhr.addEventListener('progress', function(e) {\n      var done = e.position || e.loaded, total = e.totalSize || e.total;\n      console.log('xhr progress: ' + (Math.floor(done/total*1000)/10) + '%');\n    }, false);\n\n    let start = null, start_tmp = Date.now();\n    let last_done = 0;\n    let remaining = size;\n\n    function print_bandwidth(bw) {\n      console.log(\"bandwidth\", (bw * 8)/1e3);\n    }\n    let bandwidths = [];\n\n    xhr.upload.onprogress = function(e) {\n      var done = e.position || e.loaded, total = e.totalSize || e.total;\n      if(!start) {\n        start = Date.now();\n        remaining = size - done;\n      }\n      let bandwidth = (done - last_done)/(Date.now() - start_tmp);\n      //console.log(\"diff\", done - last_done);\n      print_bandwidth(bandwidth);\n      bandwidths.push(bandwidth);\n      last_done = done;\n      start_tmp = Date.now();\n      //console.log('xhr.upload progress: ' + done + ' / ' + total + ' = ' + (Math.floor(done/total*1000)/10) + '%');\n    };\n\n    xhr.onreadystatechange = function(e) {\n      let bandwidth = (remaining)/(Date.now() - start);\n      console.log(\"doneeee\");\n      print_bandwidth(bandwidth);\n      if ( 4 === this.readyState ) {\n        console.log(['xhr upload complete', e]);\n        let [q1, q3, median, min, max, std] = StatisticsUtilities.calculate_important_values(bandwidths).map(bw => (bw * 8)/1e3);\n        console.log(`q1: ${q1} q3: ${q3} median: ${median} min: ${min} max: ${max} std: ${std}]`)\n\n      }\n    };\n\n    xhr.open(\"POST\", url, true);\n    xhr.setRequestHeader(\"Content-Type\", \"text/plain\");\n    xhr.send(body);\n  }\n}\n","import React, {Component} from 'react';\nimport Navbar from \"react-bootstrap/Navbar\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Button from \"react-bootstrap/Button\";\nimport UploadMeasurementCollector from \"../tools/upload_measurement_collector\";\n\n\nexport default class GuessUploadSample extends Component {\n  render() {\n    return (\n      <>\n        <Navbar bg=\"light\">\n          <Navbar.Brand href=\"#\">KNP</Navbar.Brand>\n        </Navbar>\n        <Container>\n          <Row>\n            Hello, World!\n          </Row>\n          <Button onClick={this.upload.bind(this)}>Upload</Button>\n        </Container>\n      </>\n    );\n  }\n\n  async upload() {\n    let bandwidth = await new UploadMeasurementCollector().upload(5, 8);\n    console.log(`measured bandwidth: ${bandwidth * 8 / 1e3}`);\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport MainPage from \"./pages/main_page\";\nimport GuessUploadSample from \"./samples/guess_upload_sample\";\nimport UploadWebsocketsSample from \"./samples/upload_websockets_sample\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <UploadWebsocketsSample />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export const AppConfiguration = {\n  PING_INTERVAL: 100,\n  MAX_LATENCY_PLOTTED: 200,\n  DOWNLOAD_NUM_STREAMS: 10,\n  UPLOAD_NUM_STREAMS: 8,\n  IGNORE_TTFB_BELOW: 3,\n  NUM_LATENCY_MEASUREMENTS: 30,\n  DOWNLOAD_DURATION: 5,\n  UPLOAD_DURATION: 5,\n};","import * as d3 from 'd3';\n\n\nexport default class StatisticsUtilities {\n  static calculate_important_values(sorted_data) {\n    let q1 = d3.quantile(sorted_data,.25),\n      q3 = d3.quantile(sorted_data,.75),\n      median = d3.quantile(sorted_data,.5),\n      min = sorted_data[0],\n      max = sorted_data[sorted_data.length - 1],\n      std = d3.deviation(sorted_data) || 0;\n    return [q1, q3, median, min, max, std];\n  }\n}","import React, {Component} from 'react';\nimport * as d3 from 'd3';\nimport StatisticsUtilities from \"../utilities/statistics_utilities\";\nimport {AppConfiguration} from \"../app_configuration\";\n\n\nexport default class BoxPlot extends Component {\n  TRANSITION_TIME = 300;\n  DOT_COLOUR = \"#4a90e2\";\n\n  constructor(props) {\n    super(props);\n    this.chart_component = React.createRef();\n    this.data = props.data.filter(d => !this.is_invalid(d)) || [];\n    this.height = props.height || 80;\n    this.width = props.width || 460;\n    this.scale = props.scale;\n    // eslint-disable-next-line no-template-curly-in-string\n    this.tooltip_html = this.props.tooltip_html || 'value: ${d.value}';\n\n  }\n\n  calculate_important_values(data) {\n    let sorted = [...data.map(d => d.value)].sort(d3.ascending);\n    return StatisticsUtilities.calculate_important_values(sorted);\n  }\n\n  get_chart_parameters() {\n    const margin = {top: 10, right: 10, bottom: 10, left: 10},\n      width = this.width - margin.left - margin.right,\n      height = this.height - margin.top - margin.bottom,\n      point_position_relative_to_top = 3/4 * height,\n      middle_anchor_relative_to_top = 1/4 * height;\n    return [margin, width, height, point_position_relative_to_top, middle_anchor_relative_to_top];\n  }\n\n  componentDidMount() {\n    let [margin, width, height] = this.get_chart_parameters();\n\n    let svg = d3.select(this.chart_component.current)\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n      .attr(\"transform\",\n        \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    this._svg = svg;\n    let data = this.data;\n    this.update_scale(data);\n\n    this._points_container = svg.append(\"g\")\n      .attr(\"id\", \"data_points\");\n\n    this.add_tooltip();\n    this.draw_points(data);\n    this.add_line_with_ticks(data);\n    this.add_quartile_box_if_it_doesnt_exist(data);\n  }\n\n  add_tooltip() {\n    this._tooltip = d3.select(this.chart_component.current)\n      .append(\"div\")\n      .style(\"opacity\", 0)\n      .attr(\"class\", \"tooltip\")\n      .style(\"border\", \"solid\")\n      .style(\"background-color\", \"white\")\n      .style(\"border-width\", \"2px\")\n      .style(\"border-radius\", \"5px\")\n      .style(\"padding\", \"5px\");\n  }\n\n  set_circle_attributes(selection) {\n    let [,,, rel_pos] = this.get_chart_parameters();\n    let tooltip = this._tooltip;\n    let component = this;\n\n    let mouseover = function(d) {\n      tooltip.style(\"opacity\", 1);\n      d3.select(this)\n        .style(\"stroke\", \"black\")\n        .style(\"opacity\", 1);\n    };\n\n    let mousemove = function(e, d) {\n      let relative_dist = d3.pointer(e, this);\n      tooltip.html(eval(\"`\" + component.tooltip_html + \"`\"))\n        .style(\"left\", (relative_dist[0]) + \"px\")\n        .style(\"top\", (relative_dist[1]) + rel_pos + \"px\");\n    };\n\n    let mouseleave = function(d) {\n      tooltip\n        .style(\"opacity\", 0);\n      d3.select(this)\n        .style(\"stroke\", \"none\")\n        .style(\"opacity\", 0.8);\n    };\n\n    selection.attr(\"cy\", () => rel_pos)\n      .attr(\"r\", 3)\n      .attr(\"fill\", this.DOT_COLOUR)\n      .on(\"mouseover\", mouseover)\n      .on(\"mousemove\", mousemove)\n      .on(\"mouseleave\", mouseleave);\n  }\n\n  draw_points(data) {\n    let x = this._x_scale;\n    let selection = this._points_container\n      .selectAll(\"circle\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"cx\", (d) => x(d.value));\n    this.set_circle_attributes(selection);\n  }\n\n  update_points_locations(data) {\n    let circles = this._points_container\n      .selectAll(\"circle\")\n      .data(data);\n\n    circles\n      .transition()\n      .duration(this.TRANSITION_TIME)\n      .attr(\"cx\", d => this._x_scale(d.value));\n  }\n\n  add_line_with_ticks(data) {\n    let indicator_tick_height = 10,\n      indicator_stroke_colour = '#979797',\n      x = this._x_scale,\n      svg = this._svg;\n\n    let [,,, min, max,] = this.calculate_important_values(data);\n    let [, width,,, mid_anchor_rel] = this.get_chart_parameters();\n\n    let middle_anchor = svg.append(\"g\")\n      .attr(\"transform\", \"translate(0,\" + mid_anchor_rel + \")\");\n\n    this._middle_anchor = middle_anchor;\n\n    let x_min = x(min) || 0,\n        x_max = x(max) || width;\n\n    this.main_line = middle_anchor.append(\"line\")\n      .attr(\"x1\", x_min)\n      .attr(\"y1\", 0)\n      .attr(\"x2\", x_max)\n      .attr(\"y2\", 0)\n      .attr(\"stroke\", indicator_stroke_colour);\n\n    function make_tic(at) {\n      return middle_anchor.append(\"line\")\n        .attr(\"x1\", at)\n        .attr(\"y1\", -indicator_tick_height/2)\n        .attr(\"x2\", at)\n        .attr(\"y2\", +indicator_tick_height/2)\n        .attr(\"stroke\", indicator_stroke_colour);\n    }\n\n    this.tick_1 = make_tic(x_min);\n    this.tick_2 = make_tic(x_max);\n  }\n\n  add_quartile_box_if_it_doesnt_exist(data) {\n    if (this._quartile_box || data.length < 5) {\n      return\n    }\n    this.add_quartile_box(data);\n  }\n\n  add_quartile_box(data) {\n    let indicator_box_height = 20,\n      indicator_stroke_colour = '#979797',\n      x = this._x_scale;\n    let [q1, q3, median,,,] = this.calculate_important_values(data);\n\n    this._quartile_box =  this._middle_anchor\n      .append(\"g\")\n      .attr(\"id\", \"quartile_box\");\n\n    this._quartile_rect = this._quartile_box.append(\"rect\")\n      .attr(\"x\", x(q1))\n      .attr(\"y\", -indicator_box_height/2)\n      .attr(\"height\", indicator_box_height)\n      .attr(\"width\", x(q3) - x(q1))\n      .attr(\"stroke-width\", 1.5)\n      .attr(\"fill\", \"white\")\n      .attr(\"stroke\", indicator_stroke_colour);\n\n    this._median_line = this._quartile_box.append(\"line\")\n      .attr(\"x1\", x(median))\n      .attr(\"x2\", x(median))\n      .attr(\"y1\", -indicator_box_height/2)\n      .attr(\"y2\", +indicator_box_height/2)\n      .attr(\"stroke\", indicator_stroke_colour)\n      .attr(\"stroke-width\", 1.5);\n\n  }\n\n  update_scale(data) {\n    let [, width,] = this.get_chart_parameters();\n    if (this.props.scale) {\n      let [min, max] = this.props.scale;\n      this._x_scale = d3.scaleLinear()\n        .domain([max, min])\n        .range([width, 0]);\n      return;\n    }\n    let [,,, min, max,] = this.calculate_important_values(data);\n    this._x_scale = d3.scaleLinear()\n      .domain([max, min])\n      .range([width, 0]);\n  }\n\n  update_line_with_ticks(data) {\n    let [,,, min, max,] = this.calculate_important_values(data),\n      x = this._x_scale,\n      x_min = x(min),\n      x_max = x(max);\n    const transition_tick = (tick, x) => {\n      tick.transition()\n        .duration(this.TRANSITION_TIME)\n        .attr(\"x1\", x)\n        .attr(\"x2\", x);\n    };\n    this.main_line.transition()\n      .duration(this.TRANSITION_TIME)\n      .attr(\"x1\", x_min)\n      .attr(\"x2\", x_max);\n    transition_tick(this.tick_1, x_min);\n    transition_tick(this.tick_2, x_max);\n  }\n\n  update_box(data) {\n    if (!this._quartile_box) {\n      return;\n    }\n    let [q1, q3, median,,,] = this.calculate_important_values(data);\n    let x = this._x_scale;\n    this._quartile_rect\n      .transition()\n      .duration(this.TRANSITION_TIME)\n      .attr(\"x\", x(q1))\n      .attr(\"width\", x(q3) - x(q1));\n    this._median_line\n      .transition()\n      .duration(this.TRANSITION_TIME)\n      .attr(\"x1\", x(median))\n      .attr(\"x2\", x(median))\n  }\n\n  refresh_chart() {\n    let data = this.data;\n    this.update_scale(data);\n    this.update_points_locations(data);\n    this.draw_points(data);\n    this.add_quartile_box_if_it_doesnt_exist(data);\n    this.update_line_with_ticks(data);\n    this.update_box(data);\n  }\n\n  add_point(datum) {\n    this.data.push(datum);\n    this.refresh_chart();\n  }\n\n  is_invalid(datum) {\n    return !datum || (datum.value > AppConfiguration.MAX_LATENCY_PLOTTED);\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.data.length === prevProps.data.length) {\n      this.refresh_chart();\n      return;\n    }\n    let datum = prevProps.data.slice(-1).pop();\n    if (this.is_invalid(datum)) {\n      return;\n    }\n    this.data.push(datum);\n    this.refresh_chart();\n  }\n\n  render() {\n    return (\n      <>\n        <div ref={this.chart_component}/>\n      </>\n    );\n  }\n}\n"],"sourceRoot":""}